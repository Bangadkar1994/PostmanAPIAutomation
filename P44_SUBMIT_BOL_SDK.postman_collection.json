{
	"info": {
		"_postman_id": "ae0e69d1-4e64-46e5-8814-cbe8caa7b9d9",
		"name": "P44_SUBMIT BOL_SDK",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "28168622",
		"_collection_link": "https://www.postman.com/shailesh1994/workspace/p44/collection/28168622-ae0e69d1-4e64-46e5-8814-cbe8caa7b9d9?action=share&creator=28168622&source=collection_link"
	},
	"item": [
		{
			"name": "login Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData=pm.response.json();\r",
							"pm.environment.set(\"P44token\",jsonData.kxToken);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "KxToken",
						"value": "eyJhbGciOiJBMTI4S1ciLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0.vwc2tplRKrNHbJEqlN2SwB-Q3LMcVRoyocN3CTKUk0xm7eR609kYdQ.2ClEKLCYmFVDW2A5xUJFqQ.ObXoV4JdXST4KIxz1wnWahaz-3tIRTRQ7ylqyYmq2hMQbtbNR9HJD3qfrVJey8mrGIeCuFUzoni3ubYUy0uaHvZXf2MozuDPDCCcHfGZmrpSYtMIAxtSMkRx_x4OUzxMOsMUB2YVVG8XpN5kzSOVHVp9egCLswUz7D3AY_I9wqShtGJIhMfSEbdSu1x8BfjuNxaTMm9a2I_ayQOyAMZoXmFxzk9R1eZPpkBsgkiL2FOiu1aIovtg-ygEXg1NUI2enpgN8urf7dEuGBw_y-nm1ICwCuEBf5iGys9_jrnFzmJL_VKqfS9G5HEpaHJkpw9QYOWcdO-i_m1dzCL_6FYn3cNtjVTxLYeoEm3VmXWDG0NOIJZmT6uPQuTQ_PlkkNDoE8itBhl5-VjLAw2dhV9vltY7Sx2OkFDc0VKYRZIXWlsxNOmOubBC7dtXx4I4Rfs-_E-utxTE7no_GAs_9uBQgOpbSgHUFRAClwje6MsuJNy3GvYH-SQOyw9lmic1Kpp3NsCgySmRl8T0dBlai9hYtus5wxcMB_Q9lbbmxUQvmtuBjhevUP631-sY8OcXe_Y23qQxRTSBOQJBLmryONrCS0q6jhma3NukcroSC9whGtJznEPw7CvYCQK5banMVcMJBRf5wWe_WNxmp_W1Cs7nuotNgb3gQbfsTsdt63wljPRQ8ERrdykxBr1pQD4WMz3-sBLKQxJKu2EXW5lz3KYpLEa2aLw4Lphu1z9EDIsFA8DnEGC-FCiKkyxMG22czwd3ne8vBG4OZNB1OSXPbCXkjhi8lO2zeceUSaTkuJn_55d4zBC07rrW8GLS2IC7vh8YkKYPGp_5Im0-4FMwN0ldBrBGXD_G7rES7j-CKuFpoS2-18mFYkEVO8uMkfXKVfzIHFY85kJuQKEJcuvOr4hzwZe2-Dc_K4XMU4ZkfoEXCbMfcbA2Yqh7c-pBKWwBgHq5YcFzOzAVjHlollmWSBZUFClolw9EJpsrZp_dx24IjD9y1CdSoJ9GRGdQ6mgkLEZgFio8qMNYxmHJPzClitMCQmtIw2Ta0nNMXz09t4LJKFg-0K0vVCLXxZrXK2YY4jrHOxbn2WrNCT-z9rohh-Q_vXZJ2ZUc1axS289T19wk9oembPbT6rzeai2FfPDlhAkGQ_u_xstnv1xHnmPMHEgKbUochubqYaLr6bBGhbVjqUQgeCAN2yyTVZPYQkopGRdmouuEfVZv-5gXjWbE6O63ZOz10TdHLKvzFzS2lGDgQYpztNeNXrgQlUMy-upezlfJ3Pe5bcRENbpD853iJi3kAFP_xNN6vtTZyHOZZo3W5XmEnKbCluz1zlWpRE25SiGtXjchX4B7ESpWokB4dpV5sI_rGG_EaYQudqFs_ZqsTVC0AbqFI-CJT0kPnMS6X0Jn5aCG56wKt8svbSpAExiCEzet_w1kM0H8zTIQRz4v3dVY0zgYIQ2kl2_UIIjZ9QHh1Q4eEdhw3gd8hbIp0c1QN-Ka3UGVqhiW2rd4OzrmOfmGsR-NkarNlY92GHNtl2QDOf2A-FmVbkt9pmdk27VTj7GF12Q_bGlWWlTyeKDcv2byw1FlBbYD-9WzBgdjS7Or.RZL-OUXmT82yi8hhVGAfQg",
						"type": "text",
						"disabled": true
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"email\":\"deepa.choudhary@klearnow.com\",\r\n    \"password\":\"bol12345\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.klearnow.com/api-staging/v1/login",
					"protocol": "https",
					"host": [
						"api",
						"klearnow",
						"com"
					],
					"path": [
						"api-staging",
						"v1",
						"login"
					]
				}
			},
			"response": []
		},
		{
			"name": "SUBMIT-MASTERONLY",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"\r",
							"var currentTime = Math.floor(Date.now() / 1000);\r",
							"pm.environment.set(\"epochTime\", currentTime);\r",
							"//random data \r",
							"var random =Math.random().toString(14).substring(2,6);\r",
							"var useremail=\"P44\"+random;\r",
							"var username=\"M\"+random;\r",
							"var mscac=random;\r",
							"var random1 =Math.random().toString(12).substring(2,5);\r",
							"var hscac= random1;\r",
							"var hbl= \"H\"+random1;\r",
							"\r",
							"pm.environment.set(\"id\",useremail);\r",
							"pm.environment.set(\"id1\",username);\r",
							"pm.environment.set(\"ms\",mscac);\r",
							"pm.environment.set(\"hs\",hscac);\r",
							"pm.environment.set(\"hb\",hbl);\r",
							"\r",
							"\r",
							"// Set the request body\r",
							"\r",
							"var schema =\r",
							"{\r",
							"  \"$schema\": \"http://json-schema.org/draft-04/schema#\",\r",
							"  \"type\": \"object\",\r",
							"  \"properties\": {\r",
							"    \"bol\": {\r",
							"      \"type\": \"array\",\r",
							"      \"items\": [\r",
							"        {\r",
							"          \"type\": \"object\",\r",
							"          \"properties\": {\r",
							"            \"bolRequestId\": {\r",
							"              \"type\": \"string\"\r",
							"            },\r",
							"            \"mot\": {\r",
							"              \"type\": \"string\"\r",
							"            },\r",
							"            \"bolNumber\": {\r",
							"              \"type\": \"object\",\r",
							"              \"properties\": {\r",
							"                \"masterScac\": {\r",
							"                  \"type\": \"string\"\r",
							"                },\r",
							"                \"masterBolNumber\": {\r",
							"                  \"type\": \"string\"\r",
							"                },\r",
							"                \"houseScac\": {\r",
							"                  \"type\": \"string\"\r",
							"                },\r",
							"                \"houseBolNumber\": {\r",
							"                  \"type\": \"string\"\r",
							"                }\r",
							"              },\r",
							"              \"required\": [\r",
							"                \"masterScac\",\r",
							"                \"masterBolNumber\",\r",
							"                \"houseScac\",\r",
							"                \"houseBolNumber\"\r",
							"              ]\r",
							"            },\r",
							"            \"portOfLading\": {\r",
							"              \"type\": \"object\",\r",
							"              \"properties\": {\r",
							"                \"portCode\": {\r",
							"                  \"type\": \"integer\"\r",
							"                },\r",
							"                \"portName\": {\r",
							"                  \"type\": \"string\"\r",
							"                },\r",
							"                \"countryISOCode\": {\r",
							"                  \"type\": \"string\"\r",
							"                },\r",
							"                \"portArrivalEpoch\": {\r",
							"                  \"type\": \"integer\"\r",
							"                }\r",
							"              },\r",
							"              \"required\": [\r",
							"                \"portCode\",\r",
							"                \"portName\",\r",
							"                \"countryISOCode\",\r",
							"                \"portArrivalEpoch\"\r",
							"              ]\r",
							"            },\r",
							"            \"portOfUnlading\": {\r",
							"              \"type\": \"object\",\r",
							"              \"properties\": {\r",
							"                \"portCode\": {\r",
							"                  \"type\": \"integer\"\r",
							"                },\r",
							"                \"portName\": {\r",
							"                  \"type\": \"string\"\r",
							"                },\r",
							"                \"countryISOCode\": {\r",
							"                  \"type\": \"string\"\r",
							"                },\r",
							"                \"portArrivalEpoch\": {\r",
							"                  \"type\": \"integer\"\r",
							"                }\r",
							"              },\r",
							"              \"required\": [\r",
							"                \"portCode\",\r",
							"                \"portName\",\r",
							"                \"countryISOCode\",\r",
							"                \"portArrivalEpoch\"\r",
							"              ]\r",
							"            },\r",
							"            \"customer\": {\r",
							"              \"type\": \"object\",\r",
							"              \"properties\": {\r",
							"                \"customerTrackingId\": {\r",
							"                  \"type\": \"string\"\r",
							"                },\r",
							"                \"customerEINNumber\": {\r",
							"                  \"type\": \"string\"\r",
							"                },\r",
							"                \"customerName\": {\r",
							"                  \"type\": \"string\"\r",
							"                },\r",
							"                \"customerContact\": {\r",
							"                  \"type\": \"string\"\r",
							"                },\r",
							"                \"customerAddress\": {\r",
							"                  \"type\": \"string\"\r",
							"                }\r",
							"              },\r",
							"              \"required\": [\r",
							"                \"customerTrackingId\",\r",
							"                \"customerEINNumber\",\r",
							"                \"customerName\",\r",
							"                \"customerContact\",\r",
							"                \"customerAddress\"\r",
							"              ]\r",
							"            }\r",
							"          },\r",
							"          \"required\": [\r",
							"            \"bolRequestId\",\r",
							"            \"mot\",\r",
							"            \"bolNumber\",\r",
							"            \"portOfLading\",\r",
							"            \"portOfUnlading\",\r",
							"            \"customer\"\r",
							"          ]\r",
							"        }\r",
							"      ]\r",
							"    }\r",
							"  },\r",
							"  \"required\": [\r",
							"    \"bol\"\r",
							"  ]\r",
							"}\r",
							"//schema test\r",
							"const reqBody=JSON.parse(pm.request.body.raw);\r",
							"pm.test('requesttest:rSchema is valid', function () {\r",
							"    pm.expect(tv4.validate(reqBody, schema)).to.be.true;\r",
							"\r",
							"});\r",
							"//datatype test\r",
							"// pm.test('requesttest:BOL request id validation length test', function () {\r",
							"//    pm.expect(reqBody.eventMessage.bol[0].bolRequestId,\"req id is not null\").to.not.be.null;\r",
							"//    pm.expect(reqBody.eventMessage.bol[0].bolRequestId.length).to.be.below(33);\r",
							"// });\r",
							"\r",
							"pm.environment.set(\"MA\",reqBody.bol[0].bolNumber.masterBolNumber);\r",
							"pm.environment.set(\"Ms\",reqBody.bol[0].bolNumber.masterScac);\r",
							"pm.environment.set(\"P\",reqBody.bol[0].portOfUnlading.portCode);\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData=pm.response.json();\r",
							"const reqBody=JSON.parse(pm.request.body.raw);\r",
							"pm.test('BOL requestid responseid match test', function () {\r",
							"   pm.expect(jsonData[0].bolRequestId).to.eql(reqBody.bol[0].bolRequestId);\r",
							"});\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "kxtoken",
						"value": "{{P44token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": " {\r\n    \"bol\": [\r\n        {\r\n            \"bolRequestId\": \"{{id}}\",\r\n            \"mot\": \"SEA\",\r\n            \"bolNumber\": {\r\n                \"masterScac\": \"{{ms}}\",\r\n                \"masterBolNumber\": \"{{id1}}\",\r\n                \"houseScac\": \"\",\r\n                \"houseBolNumber\": \"\"\r\n            },\r\n            \"portOfLading\": {\r\n                \"portCode\": 2900,\r\n                \"portName\": \"Diverse SMS\",\r\n                \"countryISOCode\": \"GR\",\r\n                \"portArrivalEpoch\": 123456\r\n            },\r\n            \"portOfUnlading\": {\r\n                \"portCode\": 4551,\r\n                \"portName\": \"Diverse SMS\",\r\n                \"countryISOCode\": \"US\",\r\n                \"portArrivalEpoch\": 1234456\r\n            },\r\n            \"customer\": {\r\n                \"customerTrackingId\": \"368\",\r\n                \"customerEINNumber\": \"DFE1\",\r\n                \"customerName\": \"Tasty Rubber Chips XSS deposit\",\r\n                \"customerContact\": \"Kenyan Shilling vortals\",\r\n                \"customerAddress\": \"Drive Assistant\"\r\n            }\r\n        }\r\n    ]\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.klearnow.com/api-staging/v1/submitbol",
					"protocol": "https",
					"host": [
						"api",
						"klearnow",
						"com"
					],
					"path": [
						"api-staging",
						"v1",
						"submitbol"
					]
				}
			},
			"response": []
		}
	]
}